<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Layered Dashboard</title>
  {% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/user_sideCSS/userDashboard.css' %}">
</head>
<body>

<div class="page">

  <!-- BACKGROUND LAYER -->
  <div class="bg-layer"></div>

  <!-- SIDEBAR -->
<aside class="sidebar">

  <!-- Profile picture -->
  <div class="profile-pic-container">
    <img src="{% static 'assets/main-logo.png' %}" alt="Student Photo" class="profile-pic" />
  </div>

  <!-- Box 1: Menus -->
  <div class="sidebar-box box1">
    <nav class="box-menu">
      <ul>
        <li><a href="{% url 'student_dashboard' %}">Dashboard</a></li>
        <li><a href="">Documents</a></li>
                <li><a href="{% url 'student_settings' %}">Settings</a></li>
      </ul>
    </nav>
  </div>

  <!-- Box 2: Placeholder for future plans -->
<div class="sidebar-box box2">
    <div class="box2-image">
    <img src="{% static 'assets/tele.png' %}" alt="School Logo" />
  </div>

  <h4>Have Questions?</h4>
  <ul class="assistance-info">
    <li><i class="fas fa-globe"></i> <a href="https://www.schoolwebsite.edu" target="_blank">spi.edu.ph</a></li>
    <li><i class="fas fa-phone"></i>  02 12365678</li>
    <li><i class="fas fa-mobile-alt"></i> 63 912 355 6789</li>
  </ul>
</div>

<div class="box3">
  <ul class="logout-menu">
<a href="{% url 'logout' %}" id="logoutBtn">Logout</a>  </ul>
</div>
<script>
  document.getElementById("logoutBtn").addEventListener("click", function(e) {
    e.preventDefault();

    // Clear session data (adjust depending on your setup)
    sessionStorage.clear();
    localStorage.removeItem("userSession"); // if you store login info here

    // Redirect to login page
    window.location.href = "../../html/login.html";
    // Or absolute path if needed:
    // window.location.href = "file:///C:/Users/User/Downloads/scholarlySPI/html/login.html";
  });
</script>
</aside>

  <!-- MAIN FLOATING CONTENT -->
  <div class="app">
    <div class="parent">


        <div class="div1">
          <!-- A block -->
          <div class="nested nested-a">
<div class="profile-layout">
  <div class="photo-box">
    {% if profile.profile_images and profile.profile_images.url %}
     <img src="{{ profile.profile_images.url }}" alt="Student Photo" class="profile-pic" />
    {% else %}
    <img src="{% static 'assets/default-profile.png' %}" alt="Default Photo" class="profile-pic" />
    {% endif %}
  </div>
  <div class="text-stack">
    <div class="headline">WELCOME BACK, SCHOLAR <label>!</label></div>
    <div class="subtext">
      You’re proving that persistence pays off — stay motivated and finish <br>what you started.
    </div>
  </div>
</div>
          </div>

          <!-- B block (untouched) -->
          <div class="nested">
  <div class="weather-tiny">
    <div class="icon sun"></div>
    <div class="temp-label" id="weather-label"></div>
  </div>
</div>

<script>
  function updateWeatherWidget() {
    const now = new Date();

    // Format time (e.g. 07:10 AM)
    const timeString = now.toLocaleTimeString([], {
      hour: '2-digit',
      minute: '2-digit'
    });

    // Static demo values for temp + condition
    const temp = "28°";
    const condition = "Sunny";

    // Update label (removed the dot between condition and time)
    document.getElementById("weather-label").textContent =
      `${temp} ${condition} ${timeString}`;
  }

  // Run immediately and update every minute
  updateWeatherWidget();
  setInterval(updateWeatherWidget, 60000);
</script>
        </div>



        <div class="div2">
          <div class="nested nested-a">@scholarlySPI</div>
          <div class="nested nested-b">
            <div class="search-wrapper">
              <span class="search-icon">
                <!-- magnifying glass SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#0a6847" viewBox="0 0 24 24">
                  <path d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z"/>
                </svg>
              </span>
              <input type="text" placeholder="Search..." class="search-bar">
            </div>
          </div>
        </div>

<div class="div3">
  <div class="menu" data-content="status">Application Status</div>
  <div class="menu" data-content="renewal">Renewal</div>
  <div class="menu" data-content="notifications">Notifications</div>
  <div class="menu" data-content="updates">Updates</div>
  <div class="menu" data-content="history">Scholarship History</div>
</div>

<div class="div4">
  <div id="status" class="box active">
  {% if applications %}
    <div class="status-box">
      <h3>Your Scholarship Applications</h3>
      <ul>
        {% for app in applications %}
          <li>
            Semester: {{ app.semester }} |
            Status: {{ app.status }} |
            Submitted At: {{ app.submitted_at|date:"M d, Y" }}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <div class="status-box">
      <a href="{% url 'apply_scholarship' %}" class="apply-btn">Start Application</a>
    </div>

    <div class="status-box">
      <p style="font-family: 15px;">You have not applied to a scholarship yet. <br>It is best to apply now.</p>
    </div>
  {% endif %}
</div>


  <div id="renewal" class="box">
    <p>Renewal instructions and deadlines will appear here.</p>
  </div>
  <div id="notifications" class="box">
    <p>You have 3 unread messages.</p>
  </div>
  <div id="updates" class="box">
    <p>Latest scholarship updates will be shown here.</p>
  </div>
  <div id="history" class="box">
    <p>Past applications and awards are listed here.</p>
  </div>
</div>

<script>
  const menus = document.querySelectorAll('.div3 .menu');
  const boxes = document.querySelectorAll('.div4 .box');

  menus.forEach(menu => {
    menu.addEventListener('click', () => {
      // remove active from all boxes
      boxes.forEach(box => box.classList.remove('active'));
      // get target content
      const target = menu.getAttribute('data-content');
      document.getElementById(target).classList.add('active');

      // highlight active menu
      menus.forEach(m => m.classList.remove('active'));
      menu.classList.add('active');
    });
  });
</script>
        
<div class="div5">
  <canvas id="gpaChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('gpaChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: [
        'Year 1 - Sem 1', 'Year 1 - Sem 2',
        'Year 2 - Sem 1', 'Year 2 - Sem 2',
        'Year 3 - Sem 1', 'Year 3 - Sem 2',
        'Year 4 - Sem 1', 'Year 4 - Sem 2'
      ],
      datasets: [
        {
          label: 'Semester GPA',
          data: [3.2, 3.5, 3.4, 3.6, 3.7, 3.8, 3.9, 4.0], // sample GPA values
          borderColor: '#0a6847',
          backgroundColor: 'rgba(10, 104, 71, 0.2)',
          tension: 0.3,
          fill: true,
          pointRadius: 6,
          pointBackgroundColor: '#0a6847'
        },
        {
          label: 'Target GPA',
          data: [3.5, 3.5, 3.5, 3.5, 3.5, 3.5, 3.5, 3.5], // constant target line
          borderColor: '#f39c12',
          backgroundColor: 'rgba(243, 156, 18, 0.2)',
          tension: 0.3,
          fill: false,
          pointRadius: 0,
          borderDash: [6, 6] // dashed line for clarity
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          max: 4.0,
          ticks: {
            stepSize: 0.5,
            font: {
              family: 'regular',
              size: 12
            }
          }
        },
        x: {
          ticks: {
            font: {
              family: 'regular',
              size: 12
            }
          }
        }
      },
      plugins: {
        title: {
          display: true,
          text: 'ACADEMIC PROGRESS',
          align: 'start',
          font: {
            family: 'FontspringDEMO_black',
            size: 25,
            weight: 'bold'
          },
          color: '#0a6847',
          padding: {
            top: 0,
            bottom: 10
          }
        },
        legend: {
          labels: {
            font: {
              family: 'regular',
              size: 12
            }
          }
        },
        tooltip: {
          backgroundColor: '#0a6847',
          titleColor: '#fff',
          bodyColor: '#fff',
          titleFont: {
            family: 'regular',
            size: 14
          },
          bodyFont: {
            family: 'regular',
            size: 12
          }
        }
      }
    }
  });
</script>

<div class="div6">
  <div class="box left-box">
    <h4>REQUIREMENT BOARD</h4>
    <div class="requirements-list">
      <div class="requirement-card">Proof of Identity</div>
      <div class="requirement-card">Birth Certificate</div>
      <div class="requirement-card">Transcript of Records</div>
      <div class="requirement-card">Enrollment Certificate</div>
      <div class="requirement-card">Good Moral</div>
      <div class="requirement-card">Scholarship Essay</div>
    </div>
  </div>

    <div class="box right-box">
      <div id="calendar"></div>
    </div>
  </div>

    <script>
      function generateCalendar(year, month) {
        const calendar = document.getElementById("calendar");
        calendar.innerHTML = "";

        // Header
        const header = document.createElement("div");
        header.className = "calendar-header";
        const monthName = new Date(year, month).toLocaleString("default", { month: "long" });
        header.textContent = `${monthName} ${year}`;
        calendar.appendChild(header);

        // Grid
        const grid = document.createElement("div");
        grid.className = "calendar-grid";

        // Day names
        const dayNames = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
        dayNames.forEach(d => {
          const dn = document.createElement("div");
          dn.className = "day-name";
          dn.textContent = d;
          grid.appendChild(dn);
        });

        // Days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month+1, 0).getDate();

        // Empty slots before first day
        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement("div");
          empty.className = "day empty";
          grid.appendChild(empty);
        }

        // Actual days
        for (let d = 1; d <= daysInMonth; d++) {
          const day = document.createElement("div");
          day.className = "day";
          day.textContent = d;

          // Highlight today
          const today = new Date();
          if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
            day.style.background = "#0a6847";
            day.style.color = "#fff";
            day.style.fontFamily = 'regular';
            day.style.fontWeight = "600";
          }

          grid.appendChild(day);
        }

        calendar.appendChild(grid);
      }

      // Generate current month automatically
      const now = new Date();
      generateCalendar(now.getFullYear(), now.getMonth());
    </script>

    </div>
  </div>

</div>

</body>
</html>
