
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Layered Dashboard</title>
  {% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/user_sideCSS/userSettings.css' %}">
</head>
<body>

<div class="page">

  <!-- BACKGROUND LAYER -->
  <div class="bg-layer"></div>

  <!-- SIDEBAR -->
<aside class="sidebar">

  <!-- Profile picture -->
  <div class="profile-pic-container">
    <img src="{% static 'assets/main-logo.png' %}" alt="Student Photo" class="profile-pic" />
  </div>

  <!-- Box 1: Menus -->
  <div class="sidebar-box box1">
    <nav class="box-menu">
      <ul>
        <li><a href="{% url 'student_dashboard' %}">Dashboard</a></li>
        <li><a href="{% url 'user_documents' %}">Documents</a></li>
                <li><a href="{% url 'student_settings' %}">Settings</a></li>
      </ul>
    </nav>
  </div>

  <!-- Box 2: Placeholder for future plans -->
<div class="sidebar-box box2">
    <div class="box2-image">
    <img src="{% static 'assets/tele.png' %}" alt="School Logo" />
  </div>

  <h4>Have Questions?</h4>
  <ul class="assistance-info">
    <li><i class="fas fa-globe"></i> <a href="https://www.schoolwebsite.edu" target="_blank">spi.edu.ph</a></li>
    <li><i class="fas fa-phone"></i>  02 12365678</li>
    <li><i class="fas fa-mobile-alt"></i> 63 912 355 6789</li>
  </ul>
</div>

<div class="box3">
  <ul class="logout-menu">
    <a href="{% url 'logout' %}">Logout</a>
  </ul>
</div>

</aside>

  <!-- MAIN FLOATING CONTENT -->
<div class="app">
  <div class="parent">
    <!-- Profile Settings -->
<div class="div1">
  <!-- Left box: user info -->
  <div class="box-left">
    {% if profile.profile_image %}
     <img src="{{ profile.profile_image.url }}" alt="Student Photo" class="profile-pic" />
    {% else %}
    <img src="{% static 'assets/default-profile.png' %}" alt="Default Photo" class="profile-pic" />
    {% endif %}

    <div class="student-info">
      <p><strong style="font-size: 32PX;">{{ profile.user.username }}</strong> </p>
      <p><strong>Student ID:</strong> {{ profile.student_id }}</p>
      <p><strong>Course:</strong> {{ profile.course }}</p>
      <p><strong>Year Level:</strong> {{ profile.year_level }}</p>
    </div>
  </div>

  <!-- Right box: stacked buttons -->
<div class="box-right">
  <button class="edit-btn" onclick="showEditProfile()">Edit Profile</button>
  <button class="password-btn" onclick="showChangePassword()">Change Password</button>
</div>

</div>
    <!-- Notifications -->
<div class="div2" id="content-area">
  <div class="table-header">
    <h2>Personal Information</h2>
    <p class="subtitle" style="padding: 5px 0;">Your academic and contact details.</p>
  </div>
  <div class="personal-info-display horizontal-info">
    {% if applications%}
    {% for app in applications %}
    <div class="info-item" >
      <i class="fas fa-envelope"></i> <strong style="font-size: 20px;">Email Address:</strong><p style="font-size: 25px;"> {{ profile.user.email }}</p>
    </div>
    <div class="info-item">
      <i class="fas fa-phone"></i> <strong style="font-size: 20px;">Contact Number:</strong><p style="font-size: 25px;"> {{ app.cellphone }}</p>
    </div>
    <div class="info-item">
      <i class="fas fa-user"></i> <strong style="font-size: 20px;">Gender:</strong> <p style="font-size: 25px;">{{ app.sex}}</p>
    </div>
    <div class="info-item">
      <i class="fas fa-user"></i> <strong style="font-size: 20px;">Age:</strong><p style="font-size: 25px;"> {{ app.age}}</p>
    </div>
    <div class="info-item">
      <i class="fas fa-user"></i> <strong style="font-size: 20px;">Strand/Course:</strong><p style="font-size: 25px;"> {{ app.strand_course}}</p>
    </div>
    <div class="info-item wide">
      <i class="fas fa-home"></i> <strong style="font-size: 20px;">Address:</strong><p style="font-size: 25px;"> {{ app.street_no }}, {{ app.city }}, {{ app.province }}</p>
    </div>
    {% endfor %}
    {% else %}
    <p style="font-size: 25px; color: black">No personal information available. Please Apply For Scholar.</p>
    {% endif %}
  </div>
</div>

<script>
function showEditProfile() {
    document.getElementById("content-area").innerHTML = `
        <div class="table-header">
            <h2>Edit Profile</h2>
            <p class="subtitle">Update your personal information.</p>
        </div>

        <form method="post" action="{% url 'update_profile' %}" enctype="multipart/form-data" class="settings-form personal-info-form dashed-form horizontal-form">
            {% csrf_token %}
            
            <div class="form-row">
                <div class="form-group">
                    <label>Student ID</label>
                    <input type="text" name="student_id" value="{{ profile.student_id }}" required>
                </div>

                <div class="form-group">
                    <label>Course</label>
                    <input type="text" name="course" value="{{ profile.course }}">
                </div>

                <div class="form-group">
                    <label>Year Level</label>
                    <input type="number" name="year_level" value="{{ profile.year_level }}">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>GPA</label>
                    <input type="text" name="gpa" value="{{ profile.gpa }}">
                </div>

                <div class="form-group">
                    <label>Profile Image</label>
                    <input type="file" name="profile_image">
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="save-btn">Save Changes</button>
            </div>
        </form>
    `;
}

function showChangePassword() {
    const csrfToken = document.querySelector('meta[name="csrf-token"]').content;

    document.getElementById("content-area").innerHTML = `
        <div class="table-header">
            <h2>Change Password</h2>
            <p class="subtitle">Secure your account with a new password.</p>
        </div>

        <form method="post" action="{% url 'student_settings' %}" class="settings-form dashed-form horizontal-form">
            {% csrf_token %}
            
            <div class="form-row">
                <div class="form-group short-field">
                    <label>Current Password</label>
                    <input type="password" name="current_password" required>
                </div>

                <div class="form-group short-field">
                    <label>New Password</label>
                    <input type="password" name="new_password" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group short-field">
                    <label>Confirm Password</label>
                    <input type="password" name="confirm_password" required>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="save-btn">Save Password</button>
            </div>
        </form>
    `;
}
</script>


    <!-- Display Preferences -->
   <div class="div3" id="display-settings">
  <div class="table-header">
    <h2>Display Preferences</h2>
    <p class="subtitle">Adjust your dashboard text size.</p>
  </div>

  <form class="settings-form">
    <label>Font Size</label>
    <input type="range" id="fontSlider" min="12" max="20" value="14">

    <div class="form-actions">
      <button type="button" class="save-btn" id="saveFont">Save Changes</button>
    </div>
  </form>
</div>

<script>
        const fontSlider = document.getElementById("fontSlider");
    const displaySettings = document.getElementById("display-settings");
    const saveBtn = document.getElementById("saveFont");

    let tempFontSize = fontSlider.value + "px";

    // live preview while sliding
    fontSlider.addEventListener("input", () => {
    tempFontSize = fontSlider.value + "px";
    displaySettings.style.fontSize = tempFontSize;
    });

    // save action
    saveBtn.addEventListener("click", () => {
    alert("Font size saved: " + tempFontSize);
    // here you could also persist to localStorage or backend
    });
</script>

    <!-- Privacy & Security -->
<div class="div5">
  <!-- Recent Activities -->
  <div class="fit-box">
    <h3>Recent Activities</h3>
    <ul class="activity-list">
  {% for app in activities %}
    <li style="font-size: 20px;">
      Scholarship application submitted â€”
      {{ app.submitted_at|date:"M d, Y" }}
      (Status: {{ app.status }})
    </li>
  {% empty %}
    <li>No recent activities.</li>
  {% endfor %}
</ul>

  </div>

  <!-- Privacy Policy -->
  <div class="fit-box">
    <h3>Privacy Policy</h3>
    <p style="font-size: 20px;">
      Your data is handled according to our privacy guidelines. We respect your information and
      ensure it is protected. For full details, please review our
      <a href="https://privacy.microsoft.com/en-us/privacystatement" target="_blank">Privacy Statement</a>.
    </p>
    <button class="save-btn">Acknowledge Policy</button>
  </div>
</div>
</div>


</body>
</html>
